#XML Schema for Reporting 17 IHIWS Pilot Project HLA Typing
#V1.4 5/1/2016

<IHIW_Report>
<!--[ ... ]-->
<Lab LabCode="6 character code" Lab_defined_ID="Free Text">
<Software_Applied Software_Manufacturer="Free Text" Software_Name="Free Text" Software_Parameters="Free Text" Software_Version="Free Text" Sofware_Function="CV List"/>
<Hardware_Used Instrument_Firmware="Free Text" Instrument_Model_Number="Free Text" Instrument_name="Free Text" Manufacturer="Free Text"/>
<Reagent_Protocol protocol_name=“Free Text” protocol_source=“Free Text” protocol_external_identifier=“Free Text” protocol_internal_identifier=“Free Text” protocol_deviations=“Free Text” />
<Sample SampleID="Free Text">
<Genotyping Genotype_GL="GL String Formatted Genotype">
<Locus HLATyping="CV List" Alignment_Reference_DB="Free Text" BaseCalling_Reference_DB="Free Text" Consensus_Sequence="Free Text" Feature="CV List" Locus_name="CV List" MeanReadDepth="Free Text" DataFileLoc="URL or Filepath" PhasingGroup="Integer" NovelPolymorphism="Free Text" FeatureNumber=”Number” />
<GenotypeAnnotation Annotation=”Structured Text”/>
<FeatureCoordinate FeatureNumber=”Number” FeatureStart=
Number” FeatureStop=”Number”/>
</Genotyping>
</Sample>
</Lab>
</IHIW_Report>

Elements: 
Lab (one per report)
    Attributes
    LabCode: a six character alphabetic code provided by the 17WS organizers.
    Lab_defined_ID: an internal identifier used by the reporting laboratory to identify a given report. Each such laboratory identifier should allow the reporting laboratory to unambiguously identify the report.

Software_Applied (multiple per report, as needed)
		 Attributes
		 Software_Manufacturer: the manufacturer of the software
		 Software_Name: the name of the software applied
		 Software_Parameters: any non-default parameter settings used in the application of the software
		 Software_Version: the version, or other identifier, defining the software applied
		 Software_Function: (CV list: Read Processing, Base Calling/Consensus Generation, Allele Calling), the function to which the software was applied. Read processing functions may be applied to reads generated by the instrument prior to the generation of a consensus sequence. Base Calling/Consensus generation is the creation of a consensus sequence through the analysis of a set of reads. Allele calling is the identification of HLA genotypes. These functions may not be discretely distributed to individual pieces of software. 

Hardware Used (multiple per report, as needed)
	 Attributes
	 Instrument_Firmware: the version number, or other identifier, defining the software used on the instrument for data-analysis
	 Instrument_Model_Number: the model number, or other identifier, defining the type of instrument used for the typing
	 Instrument_name: the name of the instrument
	 Manufacturer: the company or organization that built the instrument

Reagent Protocol Used (multiple per report, as needed; should be associated with specific genotypes (usually at the locus level))
	Attributes
	Protocol Name: a short description of the protocol and reagents used in performing the typing
	Protocol Source: The company, laboratory or other entity that developed the protocol and reagents used to perform the typing
	Protocol External Identifier: A reference to an external source that describes the protocol and reagents applied. This could be a reference to a Genetic Testing Registry (GTR) entry, a laboratory or manufacturer webpage describing the protocol and reagents, a DOI or citation of a published paper that includes the protocol. 
	Protocol Internal Identifier: If a protocol document is uploaded, include the file-name here. 
	Protocol Deviations: Any changes to the above referenced protocol should be noted here.

Sample (multiple expected per report)
       Attributes
       SampleID: an alphanumeric string that allows the reporting laboratory to unambiguously identify the sample typed. This identifier should correspond to a sample already registered as part of a 17IHIWS project.

Genotyping (one per report)
	   Attributes
	   Genotype_GL: a locus-level HLA genotype recorded using GL String format, as defined by Milius et al. 2013 (doi: 10.1111/tan.12150). Use of GL Strings allows all genotyping ambiguities to be accurately reported, along with phase information between loci. All ambiguity should be reported for a given sample. If a given locus was tested for, but found to be not present in the subject typed (e.g., a subject homozygous for DRB1*01 alleles will have no DRB3, DRB4, or DRB5 genes), report 'Absent' (e.g., DRB3*Absent) for that locus in the GL String. If polymorphisms have been identified that are not present in the reference database (novel polymorphisms), provide a GL String that describes the allele(s) that are closest in sequence to the novel allele sequence detected. Describe the novel sequence aspects in the NovelPolymorphism attribute of the Locus element, below.

Locus (multiple expected per report)
      Attributes
      HLATyping: (Allele in the GL String), the HLA allele specified in the Genotype_GL attribute that this Locus element corresponds to.
      Alignment_Reference_DB: the IMGT/HLA Database release version (e.g., IMGT/HLA Database 3.18.0) or Genome Reference Consortium release version (GRCh37) used for aligning reads for consensus generation.
      BaseCalling_Reference_DB: the IMGT/HLA Database release version (e.g., IMGT/HLA Database 3.18.0) used to identify the genotype from the consensus sequence. 
      Consensus_Sequence: A nucleotide sequence representing a contiguous phased region of DNA. This can correspond to a single feature, or to multiple contiguous features. If a locus is Absent, this is not reported.
      Feature: (5’-UTR, 3’-UTR, Intron1,Intron2, Intron3, Intron4, Intron5, Intron6, Intron7, Exon1, Exon2, Exon3, Exon4, Exon5, Exon6, Exon7, Exon8), identify the  feature, or specific set of contiguous features, to which this Locus element applies. Multiple sets of contiguous sequences may be defined per Locus element, If only individual gene sequences have been sequenced, identify each gene feature separately. 
      Locus_name: (HLA-A, HLA-B, HLA-C, HLA-DRB1, HLA-DRB3, HLA-DRB4, HLA-DRB5, HLA-DQA1, HLA-DQB1, HLA-DPA1, HLA-DPB1), the HLA locus for which the sequence data and metadata in a given Locus element are reported.
      MeanReadDepth:  the mean read depth across the length of the consensus sequence string.  If a locus is Absent, this is not reported.
      DataFileLoc: (URL, Filepath or Filename), the URL, path or name of the file containing the primary read data generated by the instrument. Primary read data should be reported as unmapped reads with quality scores (e.g., FASTQ, SFF, or unmapped BAM with quality scores).
      PhasingGroup: (Integer), an integer(indexed at 0 for each Locus_name) that identifies Locus elements that share phase. E.g., if phase is known between all Locus elements for a given Locus-name, PhasingGroup would be either 0 or 1 for a heterozygote at the locus, and 0 for a homozygote at the locus. Each element for which phase is unknown gets a new PhasingGroup number.
      NovelPolymorphism: describe any novel sequence polymorphisms resulting in a sequence that does not correspond to an allele in the reference database using a notation that identifies the reference database version, reference allele acccession number, feature in which the novel polymorphism is found, and difference from the referenced feature. For example, IMGT/HLA|3.18.0|HLA00001|1.4|G56C identifies a G>C transversion at position 56 of exon 2 in a sequence that is otherwise identical to the exon 2 sequence of HLA-A*01:01:01:01.
      FeatureNumber: The locus-specific number (defined by the IMGT/HLA Database) for the Feature, or set of numbers, delimited by + signs, for contiguous Features reported for this Locus Element, in contiguous order.

GenotypeAnnotation: for each allele a given locus, characterize the result of the sequencing that was accomplished for each feature reported in the genotype. 
Attributes
Annotation: Distinguish the alleles as <Locus_name>_<PhasingGroup>. Separate multiple phasing groups using pipe (‘|’) characters. Identify individual Features using their FeatureNumbers. Use the code ‘X’ to indicate that the sequence was eXtended, but that no novel polymorphisms were detected in regions for which reference sequence was available. Use the code ‘V’ to indicate that novel sequence polymorphisms were detected in regions for which reference sequence was available. Describe these novel polymorphisms in the NovelPolymorphsm attribute. For example, HLA-A_0:1X3X5V|HLA-A_1:1V3X5X Indicates that HLA-A sequence feature 1 and 3 were eXtended in phasing group 0, meaning that no novel polymorphisms were detected, but that a novel sequence Variant was detected in HLA-A sequence feature 5 of phasing group 0, and that a novel HLA-A sequence Variant was detected in HLA-A sequence feature 1 of phasing group 1, and that feature 2 and 5 were eXended in phasing group 1.

FeatureCoordinate: Describe the boundaries for the features described as part of the locus element. 
Attributes
Locus: provide the Locus_name from the locus element. 
FeatureNumber: provide the FeatureNumber for the feature in question. 
FeatureStart=the start position of the feature.
FeatureStop=the end position of the feature. 
